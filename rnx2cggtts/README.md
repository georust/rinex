RNX2CGGTTS
==========

[![crates.io](https://img.shields.io/crates/v/rnx2cggtts.svg)](https://crates.io/crates/rnx2cggtts)
[![License](https://img.shields.io/badge/license-Apache%202.0-blue?style=flat-square)](https://github.com/gwbres/rinex/blob/main/LICENSE-APACHE)
[![License](https://img.shields.io/badge/license-MIT-blue?style=flat-square)](https://github.com/gwbres/rinex/blob/main/LICENSE-MIT) 

`RNX2CGGTTS` is a command line tool to convert a RINEX context to CGGTTS.

This operation is special and dedicated to high precision timing and time transfer in particular.

CGGTTS is defined by BIPM and supported by the [cggtts-rs library](https://github.com/gwbres/cggtts).

:warning: This application only works with CGGTTS 2E (latest revision) :warning:

## RINEX and sampling context

From a coherent RINEX context generated by a single receiver from which we precisely know the location, 
RNX2CGGTTS uses the navigation solver to precisely resolve the receiver clock state.

This operation is the combination of the following libraries :

- RINEX: to define a coherent RINEX context and parse it
- CGGTTS: to generate a CGGTTS file
- the Nyx Space library is used in the position solver
- Nyx Hifitime to define time and timescales accurately

## Required data

RINEX2CGGTTS requires at least one Observation RINEX file, covered by Navigation RINEX. 
SP3 is also ideal and we highly recommend covering your Observation time frames with SP3 because
it really helps the solver do its job.

You should always inject data that come from the same station in this application.

## Getting started

Build the application with cargo. The RINEX ecosystem currently requires rustc v1.64 

```bash
git clone https://github.com/georust/rinex
cargo build --release
./target/release/rnx2cggtts -h
```

## Command line example

To load your RINEX context, follow the [rinex-cli guidelines](https://github.com/georust/rinex/tree/main/rinex-cli),
we use the exact same arguments:

- `-f` (`--fp`) to load a single file (you can load as many as you want)
- `-d` to load a directory recursively. 

We don't recommend using -d to inject your Observation Data, especially if you don't define [the receiver location yourself](#define-receiver-location)

```bash

```

## Define receiver location

If the receiver's location is defined in the RINEX header, it will automatically get picked it up.  
The position defined in the Observation file is prefered, then we prefer Navgation files. Simply make sure the picked up position
is the one you expect, you can see that in the application's log :

```bash
```

## Generated Data

RINEX2CGGTTS will generate :

- a CGGTTS file named after the station (receiver) being used
- a txt file with the raw timing and statistics, basically the same txt file
you get when resolving a position with `rinex-cli`, but focused on timing
- graphs (in case you specified `--graph`), which is simply the visualization
of the txt file
